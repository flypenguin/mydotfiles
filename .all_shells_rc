## RC FOR ALL INTERACTIVE (at least for zsh) SHELLS

path_prepend ()
{
    PATH=${PATH//:$1:/:}
    PATH=${PATH#$1:}
    PATH=${PATH%:$1}
    export PATH="$1:$PATH"
}

#
# ALIASES
#

# ssh
alias ssr="ssh -l root"
alias ssp="ssh -o PubkeyAuthentication=no"
ssd() { ssh "e13itao@$1.dvag.com" }
ssdr() { ssh "root@$1.dvag.com" }

# git
alias gco="git checkout"
#alias gls="git ls" // git ls was a GIT INTERNAL alias, removed for simplicity.
alias gri="git rebase --interactive"
alias gra="git rebase --abort"
alias grc="git rebase --continue"
alias gpf="git push --force"
alias  gp="git push"
alias  gs="git status"
alias  gd="git diff"
alias gdc="git diff --cached"
# see http://is.gd/h9AB6z
alias gls="git log --pretty=format:'%C(yellow)%h%Cred%d %Creset%s%Cblue [%cn]' --decorate"
alias gll="git log --pretty=format:'%C(yellow)%h%Cred%d %Creset%s%Cblue [%cn]' --decorate --numstat"
alias gld="git log --pretty=format:'%C(yellow)%h %ad%Cred%d %Creset%s%Cblue [%cn]' --decorate --date=short"
alias glr="git log --pretty=format:'%C(yellow)%h %ad%Cred%d %Creset%s%Cblue [%cn]' --decorate --date=relative"

# ls
alias ls="ls --color=auto"
alias dir="ls -lh"

# arch
alias  pi="sudo pacman -S"
alias  pq="pacman -Qs"
alias pqs="pq"
alias pss="pacman -Ss"
alias prs="sudo pacman -Rs"
alias psy="sudo pacman -Sy"
alias psu="sudo pacman -Su"
alias yss="yaourt -Ss"
alias  yi="yaourt -S"

#
# general settings
#

# less - from http://bit.ly/1r1VoYA
export LESS='-iMRS#15'
export LESSOPEN="|$HOME/bin/_lessfilter %s"

# less awful java font rendering
export _JAVA_OPTIONS='-Dawt.useSystemAAFontSettings=on'
export EDITOR='vim'


#
# proper colors
#

[ ! -f $HOME/.no_solarized ] && eval `dircolors $HOME/.solarized/dircolors.256dark`


#
# path mangling ...
#

path_prepend "${HOME}/bin"
# why???
#export PATH="$PATH:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/bin/vendor_perl:/usr/bin/core_perl"


#
# RUBY (this must be AFTER $PATH settings! otherwise rvm always complains)
#

# rvm wants that in .zshrc. But that sucks, kinda, because of sublime text.
# (it doesn't read it there). let's keep it here.
if [ -d "$HOME/.rvm" ]; then
    # Add RVM to PATH for scripting
    # must be before the script execution below.
    path_prepend "$HOME/.rvm/bin"

    # Load RVM in/o a shell session *as a function*
    [[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"
fi


#
# python virtualenv
#

for a in /usr/bin /usr/local/bin ; do
  vs="$a/virtualenvwrapper.sh"
  if [ -f "$vs" ]; then
    source "$vs"
    # for $WORKON_HOME for example. just so we don't need to check that in here.
    local V_SET_FILE="$HOME/.virtualenvwrapper_settings"
    [ -f "$V_SET_FILE" ] && source "$V_SET_FILE"
    break
  fi
done


#
# make applications behave nicer
#


# workaround for terminator / gnome vte bug: http://bit.ly/1ByO5es
# pretty crazy stuff, this.
if [ ! -f $HOME/.no_term_fix ]; then
  if [ "$TERM" = "xterm" ]; then
    if infocmp xterm-256color >/dev/null 2>&1; then
      if [[ $COLORTERM =~ ^(gnome-terminal|Terminal|xfce4-terminal)$ ]]; then
        export TERM="xterm-256color"
      fi
    fi
  fi
fi
