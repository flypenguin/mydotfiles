## RC FOR ALL INTERACTIVE (at least for zsh) SHELLS

path_prepend ()
{
    PATH=${PATH//:$1:/:}
    PATH=${PATH#$1:}
    PATH=${PATH%:$1}
    export PATH="$1:$PATH"
}

path_append ()
{
    PATH=${PATH//:$1:/:}
    PATH=${PATH#$1:}
    PATH=${PATH%:$1}
    export PATH="$PATH:$1"
}

#
# ALIASES
#

# ssh
alias ssr="ssh -l root"
alias ssp="ssh -o PubkeyAuthentication=no"

# git
alias gco="git checkout"
#alias gls="git ls" // git ls was a GIT INTERNAL alias, removed for simplicity.
alias gri="git rebase --interactive"
alias gra="git rebase --abort"
alias grc="git rebase --continue"
alias gpf="git push --force"
alias  gp="git push"
alias  gs="git status"
alias  gd="git diff"
alias gdc="git diff --cached"
# see http://is.gd/h9AB6z
# it's ...
# (g)it (l)og ...
#   (s)hort, (c)ontinuous, (l)ong, (d)iff
# (g)it (d)iff ...
#   (), (s)tat
alias gls="git --no-pager log -n 40 --pretty=format:'%C(yellow)%h %ad%Cred%d %Creset%s%Cblue [%cn]' --decorate --date=short"
alias glc="git            log       --pretty=format:'%C(yellow)%h %ad%Cred%d %Creset%s%Cblue [%cn]' --decorate --date=short"
alias gll="git log --pretty=format:'%C(yellow)%h%Cred%d %Creset%s%Cblue [%cn]' --decorate --numstat"
alias gld="git log --pretty=format:'%C(yellow reverse)%h%C(reset) %C(yellow reverse)%ad%C(red reverse)%d%C(reset) %C(white reverse)%s%C(reset)%Cblue [%cn]' --decorate --date=short -p"
alias gds="git --no-pager diff --stat"

# ls
alias ls="ls --color=auto"
alias dir="ls -lh"

# arch
alias  pi="sudo pacman -S"
alias  pq="pacman -Qs"
alias pqs="pq"
alias pss="pacman -Ss"
alias prs="sudo pacman -Rs"
alias psy="sudo pacman -Sy"
alias psu="sudo pacman -Su"
alias yss="yaourt -Ss"
alias  yi="yaourt -S"

# docker
alias docker_clean_images="docker images | grep '<none>' | awk '{print $3}' | xargs docker rmi"
alias docker_rm_all="docker ps -a | cut -d ' ' -f 1 | grep -v CONTAINER | xargs docker rm -f"
alias docker_stop_all="docker ps | cut -d ' ' -f 1 | grep -v CONTAINER | xargs docker stop"
alias docker_kill_all="docker ps | cut -d ' ' -f 1 | grep -v CONTAINER | xargs docker kill"

#
# general settings
#

# less - from http://bit.ly/1r1VoYA
export LESS='-iMRS#15'
export LESSOPEN="|$HOME/bin/_lessfilter %s"

# less awful java font rendering
export _JAVA_OPTIONS='-Dawt.useSystemAAFontSettings=on'
export EDITOR='vim'


#
# path mangling ...
#

# mac os & homebrew - if the coreutils are installed, use them instead of the OS X ones.
# TODO - find a better way than executing this thing!!
if sw_vers > /dev/null 2>&1 ; then
  for a in /usr/local/opt/* ; do
    [ -d "$a/libexec/gnubin" ] && path_prepend "$a/libexec/gnubin"
  done
  [ -d /usr/local/sbin ] && path_prepend "/usr/local/sbin"
fi

# our own binary directory should have preference over the system ones ...
path_prepend "${HOME}/bin"

if [ -d "$HOME/clis" ] ; then
  for p in "$HOME/clis/"* ; do
    [ -d "$p/bin" ] && p="$p/bin"
    path_append "$p"
  done
fi


#
# proper colors
#

[ ! -f $HOME/.no_solarized ] && eval `dircolors $HOME/.solarized/dircolors.256dark`


#
# platform-dependent settings :)
#

[ -f "$HOME/.all_shells_rc.$(uname)" ] && source "$HOME/.all_shells_rc.$(uname)"


#
# RUBY (this must be AFTER $PATH settings! otherwise rvm always complains)
#

# rvm wants that in .zshrc. But that sucks, kinda, because of sublime text.
# (it doesn't read it there). let's keep it here.
if [ -d "$HOME/.rvm" ]; then
    # Add RVM to PATH for scripting
    # must be before the script execution below.
    path_prepend "$HOME/.rvm/bin"

    # Load RVM in/o a shell session *as a function*
    [[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"
fi


#
# python virtualenv
#

for a in /usr/bin /usr/local/bin ; do
  vs="$a/virtualenvwrapper.sh"
  if [ -f "$vs" ]; then
    source "$vs"
    # for $WORKON_HOME for example. just so we don't need to check that in here.
    local V_SET_FILE="$HOME/.virtualenvwrapper_settings"
    [ -f "$V_SET_FILE" ] && source "$V_SET_FILE"
    break
  fi
done


#
# make applications behave nicer
#


# workaround for terminator / gnome vte bug: http://bit.ly/1ByO5es
# pretty crazy stuff, this.
if [ ! -f $HOME/.no_term_fix ]; then
  if [ "$TERM" = "xterm" ]; then
    if infocmp xterm-256color >/dev/null 2>&1; then
      if [[ $COLORTERM =~ ^(gnome-terminal|Terminal|xfce4-terminal)$ ]]; then
        export TERM="xterm-256color"
      fi
    fi
  fi
fi


a="$HOME/.host_specific_rc"
[ -f "$a" ] && source $a
